<!-- templates/index.html -->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
        <title>Customer Support Chatroom</title>
    </head>
    <body>
    <div id="chatroom">
        <!-- Header Section -->
        <div class="header">
            <div class="logo">
                <h1>Customer Support Online Room</h1>
            </div>
            <div class="room-info">
                <label for="UserType">Select User Type:</label>
                <select id="UserType" name="UserType">
                    <option value="Customer">
                    Customer
                    </option>
                    <option value="Agent">
                    Agent
                    </option>
                </select>
                <label for="customerName">Name:</label>
                <input type="text" id="customerName" placeholder="###" />
                <label for="roomNumber">Room:</label>
                <input type="text" id="roomNumber" placeholder="###" />
                <button class="send-btn" onclick="joinRoom()">
                    <img src="{{ url_for('static', filename='send-icon.svg') }}" alt="Join" />
                </button>
            </div>
        </div>

        <!-- Main Content Section -->
        <div class="content">
            <div class="llm-panel">
                <!-- Advised Response Panel (For Agent) -->
                <div class="advised-response-panel">
                    <div class="advised-response-panel-message">
                        <h3>ðŸ¤– Advised Response:</h3>
                        <div id="advisedResponse" class="'advisedResponse"><br>
                            <p>LLM is waiting</p>
                        </div>
                    </div>
                </div>
                <!-- File Input (For LLM) -->
                <div class="file-input-pane" id="file-input-pane">
                    <input type="file" id="fileInput" />
                    <button class="upload-btn" onclick="uploadFile()">Send</button>
                </div>
                <div class="file-status" id="file-status"></div>
            </div>
        <!-- Conversation Panel (Customer-Agent Messages) -->
            <div class="conversation-panel">
                <div class="messages" id="messages">
                <!-- Messages will populate here -->
                </div>

                <!-- Message Input Box -->
                <div class="message-input">
                <textarea id="userMessage" placeholder="Enter your message..." onkeydown="handleEnterKey(event)"></textarea>
                <button class="send-btn" onclick="sendMessage()">
                    <img src="{{ url_for('static', filename='send-icon.svg') }}" alt="Send Text" />
                </button>
                <button class="send-btn" onclick="toggleRecording()" id="sendAudio">
                    <img src="{{ url_for('static', filename='microphone-icon.svg') }}" alt="Toggle Recording" />
                    <span id="recordingStatus">Start Recording</span> <!-- Add a span to display recording status -->
                </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    </body>
</html>
